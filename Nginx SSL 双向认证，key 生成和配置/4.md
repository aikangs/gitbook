# 客户端证书的生成 * 创建存放 key 的目录 users

```bash
mkdir users
```

> * 为用户创建一个 key

```bash
openssl genrsa -des3 -out ./users/client.key 2048
输出：
Enter pass phrase for ./users/client.key:123
Verifying - Enter pass phrase for ./users/client.key:123
#要求输入 pass phrase，这个是当前 key 的口令，以防止本密钥泄漏后被人盗用。两次输入同一个密码(比如我这里输入 123)，users 目录下有 client.key 文件生成。
```

> * 为 key 创建一个证书签名请求 csr 文件

```bash
openssl req -new -key ./users/client.key -out ./users/client.csr
#users 目录下有 client.csr 文件生成。
```

> * 使用我们私有的 CA key 为刚才的 key 签名

``bash`
openssl ca -in ./users/client.csr -cert ./private/ca.crt -keyfile ./private/ca.key -out ./users/client.crt -config "./conf/openssl.conf"
```

> * 将证书转换为大多数浏览器都能识别的 PKCS12 文件

```bash
openssl pkcs12 -export -clcerts -in ./users/client.crt -inkey ./users/client.key -out ./users/client.p12
输出
Enter pass phrase for ./users/client.key:
Enter Export Password:
Verifying - Enter Export Password:
输入密码后，users 目录下有 client.p12 文件生成。
```
